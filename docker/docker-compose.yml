version: "3.3"
services:
  opennebula-front-end:
    container_name: ${opennebula_container_name}
    image: "opennebula/opennebula"
    ports:
      - "2022:22"
      - "80:80"
      - "2474:2474"
      - "4124:4124"
      - "4124:4124/udp"
      - "5030:5030"
      - "29876:29876"

#   –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç...
#   env_file:
#     opennebula-front-end.env
#   –ü–æ—ç—Ç–æ–º—É:
    environment:
      OPENNEBULA_HOST: opennebula.demo.lab
      OPENNEBULA_SSH_HOST: opennebula.demo.lab
      ONEADMIN_PASSWORD: xxXX1234  # –∑–∞–∫—Ä–æ–π—Ç–µ –≥–ª–∞–∑–∫–∏ üëÄ, –∑–¥–µ—Å—å –ø–∞—Ä–æ–ª—å
      DIND_ENABLED: "yes"
      SUNSTONE_HTTPS_ENABLED: "no"
    
    networks:
      backend:
        ipv4_address: "${opennebula_backend_ip}"


networks:
  backend:
    driver: bridge
    ipam:
      config:
      - subnet: 172.16.0.0/16
